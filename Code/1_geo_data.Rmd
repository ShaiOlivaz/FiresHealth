---
title: "Geographic Data"
author: "Shai Vaz"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
# Data Wrangling
library(dplyr)
library(tidyr)
library(stringr)
library(readr)

# Geographic
library(sf)
library(geobr)

# Personal functions
source("./Functions/bulk_rds.R")
```

# Municipality Seats

```{r}
muni_seat <- read_municipal_seat(year = 2010) |> 
  # Bring State names
  left_join(
    read_state() |> 
      as_tibble() |> 
      mutate(code_state = as.character(code_state)) |> 
      select(code_state, name_state),
    
    by = "code_state"
  ) |> 
  # Minimalist dataframe
  select(
    code_muni,
    name_muni,
    name_state,
    geom
  ) |>
  # Get latitude and longitude
  mutate(
    lon_muni = st_coordinates(geom)[,1],
    lat_muni = st_coordinates(geom)[,2]
  )
```

# Save as RDS
```{r}
bulk_write_rds(
  muni_seat
)
```

